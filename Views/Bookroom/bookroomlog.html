{extends file="../Shared/portoku.master.html"} {block name=headcontent}
<!-- Basic -->
<meta charset="UTF-8">

<title>Advanced Tables | SHARED ON THEMELOCK.COM</title>
<meta name="keywords" content="HTML5 Admin Template" />
<meta name="description" content="Porto Admin - Responsive HTML5 Template">
<meta name="author" content="okler.net">

<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<!-- Web Fonts  -->
<link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Shadows+Into+Light" rel="stylesheet" type="text/css">

<!-- Vendor CSS -->
<link rel="stylesheet" href="{$baseUrl}/assets/vendor/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" href="{$baseUrl}/assets/vendor/font-awesome/css/font-awesome.css" />
<link rel="stylesheet" href="{$baseUrl}/assets/vendor/magnific-popup/magnific-popup.css" />
<!-- <link rel="stylesheet" href="{$baseUrl}/assets/vendor/bootstrap-datepicker/css/datepicker3.css" /> -->

<!-- Specific Page Vendor CSS -->
<link rel="stylesheet" href="{$baseUrl}/assets/vendor/select2/select2.css" />
<!-- <link rel="stylesheet" href="{$baseUrl}/assets/vendor/jquery-datatables-bs3/assets/css/datatables.css" /> -->

<!-- Theme CSS -->
<link rel="stylesheet" href="{$baseUrl}/assets/stylesheets/theme.css" />

<!-- Skin CSS -->
<link rel="stylesheet" href="{$baseUrl}/assets/stylesheets/skins/default.css" />

<!-- Theme Custom CSS -->
<!-- <link rel="stylesheet" href="{$baseUrl}/assets/stylesheets/theme-custom.css"> -->

<!-- Head Libs -->
<script src="{$baseUrl}/assets/vendor/modernizr/modernizr.js"></script>
{/block} {block name=bodycontent} 
<!-- <div class="row show-grid">
    <div class="col-md-2">
        <span class="show-grid-block">
            <a href="{$baseUrl}/msprodctgry/form">
             <button type="button" id="btn_add" class="mb-xs mt-xs mr-xs btn btn-primary">Add</button> 
            </a>
        </span>
    </div>
    <div class="col-md-10">
    </div>
</div> -->

<div>
    

</div>

 
<div class="row show-grid">
<div class="col-md-2">Log Even
    <span class="show-grid-block">
                                        <select name="log_even" id="log_even" class="form-control populate"  required onchange="change_task_sts()">
                                            <option value="All">ALL</option>  
                                            <option value="book">book</option>  
                                            <option value="edit">edit</option> 
                                            <option value="delete">delete</option>    
                                               <!-- {foreach from=$data_sts_task item=data}
                                        <option value="{$data.data_sts_task}" {if $task_sts_single==$data.data_sts_task} selected {/if}>{$data.data_sts_task}</option>
                                            {/foreach}                                                -->
                                        </select>    
    </span>
    <input type="hidden" id="tampung_log_even" value="{$log_even}" class="form-control">
</div>
 <div class="col-md-4">
Log Date
    <div id="datepickerz" class="input-daterange input-group" data-plugin-datepicker>
	                        <span class="input-group-addon">
			                <i class="fa fa-calendar"></i>
	                        </span>
			                <input type="text" value="{$date_start_view}" class="form-control" required name="date_start" id="date_start" placeholder="{$smarty.now|date_format:"%m/%d/%Y"}" onchange="change_date_start()" >
			                <span class="input-group-addon">to</span>
			                <input type="text" value="{$date_end_view}" class="form-control" required name="date_end" id="date_end" placeholder="{$smarty.now|date_format:"%m/%d/%Y"}"  onchange="change_date_end()" >
                            <!-- <input type="text" class="form-control" required name="date_start" id="date_start" placeholder="{$smarty.now|date_format:"%m/%d/%Y"}" value="{$plan_start_from}" onchange="change_date_start()" >
                            <span class="input-group-addon">to</span>
                            <input type="text" class="form-control" required name="date_end" id="date_end" placeholder="{$smarty.now|date_format:"%m/%d/%Y"}" value="{$plan_start_to}" onchange="change_date_end()" > -->
                        </div>

    

</div> 

<div class="col-md-2">


    

</div> 
</div>

  <!-- <form id="form1" class="form-horizontal" method="POST" action="{$baseUrl}/Task/task_pic" >   -->
<section>
<div class="row show-grid">
<div class="col-md-2">


  <span class="show-grid-block">
     <input type="hidden" name="task_sts_single" id="task_sts_single" value="{$task_sts_single}" class="form-control">
  </span>



</div>
 <div class="col-md-2">
  <span class="show-grid-block">
     <!-- <input type="hidden" name="date_start_single" id="date_start_single" value="{$plan_start_from}" class="form-control"> -->
     <input type="hidden" name="date_start_single" id="date_start_single" value="{$date_start_view}" class="form-control">
  </span>
</div> 
<div class="col-md-2">
  <span class="show-grid-block">
     <!-- <input type="hidden" name="date_end_single" id="date_end_single" value="{$plan_start_to}" class="form-control"> -->
     <input type="hidden" name="date_end_single" id="date_end_single" value="{$date_end_view}" class="form-control">
  </span>
</div>
</div>

<button id="btnSubmit" class="mt-sm mb-sm btn btn-primary">Search</button>
</section>
  <!-- </form>   -->

<section class="panel">
							<!-- <header class="panel-heading">
								<div class="panel-actions">
									<a href="#" class="fa fa-caret-down"></a>
									<a href="#" class="fa fa-times"></a>
								</div>
						
								<h2 class="panel-title">Basic</h2>
							</header> -->
							<div class="panel-body">
								<table class="table table-bordered table-striped mb-none" id="datatable-default">
									<thead>
										<tr>

                                            <th class="hidden-phone">log</th>
                                            <th class="hidden-phone">Even</th>
                                            <th class="hidden-phone">User Name</th>
                                            <th class="hidden-phone">Log Date</th>

										</tr>
									</thead>
									

                                        <tbody>{foreach from=$list_log item=data}
                                            <tr class="gradeA">
                                            <td class="hidden-phone">{$data.log}</td>
                                            <td class="hidden-phone">{$data.even}</td>
                                            <td class="hidden-phone">{$data.user_name}</td>
                                            <td class="hidden-phone">{$data.logdate}</td>
                                            
                                            </tr>{/foreach}   
									</tbody>
								</table>
							</div>
                        </section>

<div id="modalPrimary" class="modal-block modal-block-primary mfp-hide">
    <section class="panel">
        <header class="panel-heading">
            <h2 class="panel-title">Confirmation</h2>
        </header>
        <div class="panel-body">
            <div class="modal-wrapper">
                <div class="modal-icon">
                    <i class="fa fa-question-circle"></i>
                </div>
                <div class="modal-text">
                    <h4>Are you sure want to delete "<span id="info_row_modal"></span>" ?</h4>
                     <span id="dialog_idx"class="hidden"></span>
                </div>
            </div>
        </div>
        <footer class="panel-footer">
            <div class="row">
                <div class="col-md-12 text-right">
                    <button class="btn btn-primary modal-confirm" id="btnDelete" onclick="delete_prodctgry()">Yes</button>
                    <button class="btn btn-default modal-dismiss">No</button>
                </div>
            </div>
        </footer>
    </section>
</div>




{/block} {block name=scriptfooter}
<style type="text/css">
    .columnsorter {
        cursor: pointer;
    }
</style>

<script type="text/javascript" language="javascript" src="{$baseUrl}/assets/vendor/datatables/media/js/jquery.dataTables.js"></script>
<link rel="stylesheet" type="text/css" href="{$baseUrl}/assets/vendor/datatables/media/css/jquery.dataTables.css">


<script src="{$baseUrl}/assets/javascripts/ui-elements/examples.modals.js"></script>


<script type="text/javascript">
    var $codes;

    $("#btnSubmit").click(function () {
        $date_start = $("#date_start").val();
        $date_end = $("#date_end").val();
        $log_even = $("#log_even").val();

        window.location = "{$baseUrl}/bookroom/bookroomlog/" + $log_even + "/" + $date_start + "/" + $date_end ;
    });



    $(".c_button_done").click(function () {   
        $id_ms_prj = $(this).attr("id_ms_prj");
        $pic_name = $(this).attr("pic_name");
        $dept_cd = $(this).attr("dept_cd");
        $id = $(this).attr("datatask_id");
        $task_sts_desc = $(this).attr("task_sts_desc");

        // alert($task_sts_desc);

        if ($task_sts_desc=='Done'){
            // alert($task_sts_desc);
        } else {
            // window.location = "{$baseUrl}/Assigntopic/taskdone/" + $id_ms_prj + "/" + $pic_name + "/" + $id + "/task_pic" + "/update_to_done/" ;
            window.location = "{$baseUrl}/Task/form_update_task/" + $id_ms_prj + "/" + $pic_name + "/" + $id + "/task_pic" + "/update_to_done/" ;
        }
        
        
    }); 

    $(".c_view_cr_file").click(function()
	{
        // $id_btn_delete = $(this).attr("id_btn_delete");
        $id = $(this).attr("id");
        $file_cr_name = $(this).attr("file_cr_name");

        window.location = "{$baseUrl}/Assigntopic/crprint/" + $id + "/" + $file_cr_name;

    });

    $(".c_view_project_info").click(function()
	{
        // $id_btn_delete = $(this).attr("id_btn_delete");
        // $id = $(this).attr("id");
        $id_ms_prj = $(this).attr("id_ms_prj");

        window.location = "{$baseUrl}/Info/project_info/" + $id_ms_prj ;

    });

    $(".c_button_actual").click(function () {   
        $id_ms_prj = $(this).attr("id_ms_prj");
        $pic_name = $(this).attr("pic_name");
        $dept_cd = $(this).attr("dept_cd");
        $id = $(this).attr("datatask_id");
        $task_sts_desc = $(this).attr("task_sts_desc");

        // alert($task_sts_desc);

        if ($task_sts_desc=='Not Started'){
            // alert($task_sts_desc);   
        } else {
            window.location = "{$baseUrl}/Assigntopic/taskdone/" + $id_ms_prj + "/" + $pic_name + "/" + $id + "/task_pic" + "/edit_actual_date/" ;
        }
        
        
    });

    $(".c_button_insert_log").click(function () {   
        $id_ms_prj = $(this).attr("id_ms_prj");
        $pic_name = $(this).attr("pic_name");
        $dept_cd = $(this).attr("dept_cd");
        $id = $(this).attr("datatask_id");
        $task_sts_desc = $(this).attr("task_sts_desc");

        // alert($task_sts_desc);

      
            window.location = "{$baseUrl}/Task/project_log/" + $id_ms_prj + "/" + $pic_name + "/" + $id ;
        
        
        
    });


    $("#btnDelete").click(function () {
        window.location = "{$baseUrl}/msprodctgry/delete/" + $id_btn_delete ;
    });

    // $(".c_button_task").click(function () {   
    //     $id_ms_prj = $(this).attr("id_ms_prj");
    //     window.location = "{$baseUrl}/Assigntopic/task_for_pic_dept/" + $id_ms_prj ;
    // });    

    // $(".form1").submit(function () {   
    //     $prj_ctgry_cd = $(this).attr("prj_ctgry_cd");
    //     alert($prj_ctgry_cd);
    //     // window.location = "{$baseUrl}/msprodctgry/form/" + $id_btn_edit ;
    // });   

    function change_task_sts(){

    // $prj_ctgry_cd_single = $("#prj_ctgry_cd").val();
    $("#task_sts_single").val($("#task_sts").val());

    $task_sts = $("#task_sts").val();

    if ($task_sts=='Outstanding' || $task_sts=='' ){

        document.getElementById("datepickerz").style.visibility = "hidden";
         
    } else {
        document.getElementById("datepickerz").style.visibility = "visible";
    }

    }


//     $(document).ready(function() {

//         $task_sts = $("#task_sts").val();

//         if ($task_sts=='Outstanding' || $task_sts==''){

//         document.getElementById("datepickerz").style.visibility = "hidden";
         
//     } else {
//         document.getElementById("datepickerz").style.visibility = "visible";
//     }

// });

    function change_date_start(){

    

    // var str = $("#date_start").val();
    // var res = str.replace("/", "-");
    // var res2 = res.replace("/", "-");

    $("#date_start_single").val($("#date_start").val());
    

    }

    function change_date_end(){

    // var ztr = $("#date_end").val();
    // var rez = ztr.replace("/", "-");
    // var rez2 = rez.replace("/", "-");

    $("#date_end_single").val($("#date_end").val());

    }

    $(document).ready(function() {
        $("#log_even").val($("#tampung_log_even").val());
        var date_start_single = $("#date_start_single").val();
        var date_end_single = $("#date_end_single").val();

        
        
        if (date_start_single != '//'){
            $("#date_start").val(date_start_single);
            $("#date_end").val(date_end_single);

            // alert(date_start_single);

        } else {
            d = new Date();

            $tgl = d.getDate();
            $bulan = d.getMonth() + 1;
            $tahun = d.getFullYear();
            $tgl_now = $bulan + "/" + $tgl + "/" + $tahun;

            $("#date_start").val($tgl_now);
            $("#date_end").val($tgl_now);
        }
        

        

    });


</script>

<!-- Examples -->
        <script src="{$baseUrl}/assets/javascripts/ui-elements/examples.modals.js"></script>

<script src="{$baseUrl}/assets/vendor/select2/select2.js"></script>
 <script src="{$baseUrl}/assets/vendor/jquery-datatables/media/js/jquery.dataTables.js"></script> 
 <script src="{$baseUrl}/assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js"></script> 
<script src="{$baseUrl}/assets/vendor/jquery-datatables-bs3/assets/js/datatables.js"></script>


<script src="{$baseUrl}/assets/javascripts/theme.js"></script>


<script src="{$baseUrl}/assets/javascripts/theme.custom.js"></script>


<!-- <script src="{$baseUrl}/assets/javascripts/theme.init.js"></script>  -->


<script src="{$baseUrl}/assets/javascripts/tables/examples.datatables.default.js"></script>
<script src="{$baseUrl}/assets/javascripts/tables/examples.datatables.row.with.details.mi.js"></script>
<script src="{$baseUrl}/assets/javascripts/tables/examples.datatables.tabletools.js"></script>



{/block}